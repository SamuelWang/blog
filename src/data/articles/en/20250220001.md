---
title: "Installing Ubuntu Server on Hyper-V"
slug: "installing-ubuntu-server-on-hyper-v"
author: "Samuel Wang"
description: "A step-by-step guide to installing Ubuntu Server on Microsoft Hyper-V, covering setup, configuration, and optimization."
tags: ["Ubuntu", "Hyper-V", "Infrastructure"]
releaseDate: "2025-02-20"
updateDate: "2025-02-20"
---

## Installing Ubuntu

Download the ISO image from the official website of Ubuntu:  
[https://ubuntu.com/download/server](https://ubuntu.com/download/server)

Create a new VM with the following steps:  
[https://learn.microsoft.com/en-us/virtualization/hyper-v-on-windows/quick-start/create-virtual-machine](https://learn.microsoft.com/en-us/virtualization/hyper-v-on-windows/quick-start/create-virtual-machine)

Select the ISO image downloaded as the boot image, then start the VM and follow the installation steps.

If it encounters the following error, you can try to disable the secure boot or use generation 1.

![Secure Boot Error](/images/articles/20250220001/secure-boot-error.png)

Setting a static IP for the new VM

In general, we usually use the dynamic IP to access the IP. When we access the VM with the current IP, it may be changed later, we will have to use the new IP to access the VM.

We can set and use a static IP to access the VM for convenience.

First, set up a NAT network:  
[https://learn.microsoft.com/en-us/virtualization/hyper-v-on-windows/user-guide/setup-nat-network](https://learn.microsoft.com/en-us/virtualization/hyper-v-on-windows/user-guide/setup-nat-network)

> Notice that the network segment cannot be same with the current network segment. For example, the IP of my WiFi is 192.16.0.17, and the IP of the gateway is 192.168.0.1, so I use the IP of 192.168.56.1 as the IP of the VM switch.

Then, log in to the VM and execute the command `ip link` to identify the ethernet interfaces, for example, the default ethernet interface in the following figure is “eth0”:

![ip link](/images/articles/20250220001/ip-link.png)

Execute `cd /etc/netplan` to switch the working folder to the netplan, and execute `ls -al .` to list the configuration files. It is common to be `01-netcfg.yaml` or `50-cloud-init.yaml`, and open the file with the text editor, like vim.

Type the content like:

![netplan config](/images/articles/20250220001/netplan-config.png)

Save the file and execute `sudo chmod 600 /etc/netplan/50-cloud-init.yaml` to give the permission to the file. And execute `sudo netplan apply` to apply the changes.

Then try to ping google.com, it should work.

## (Optional) Install zsh and its related plugins

Install _zsh_:  
`sudo apt install zsh`

Set the _zsh_ shell as the default shell:  
`chsh -s $(which zsh)`

Install _oh-my-zsh_:  
[https://ohmyz.sh/#install](https://ohmyz.sh/#install)

Install _powerlevel10k_:  
[https://github.com/romkatv/powerlevel10k?tab=readme-ov-file#oh-my-zsh](https://github.com/romkatv/powerlevel10k?tab=readme-ov-file#oh-my-zsh)

Install _zsh-completions_:  
[https://github.com/zsh-users/zsh-completions](https://github.com/zsh-users/zsh-completions)

Install _zsh-autosuggestions_:  
[https://github.com/zsh-users/zsh-autosuggestions](https://github.com/zsh-users/zsh-autosuggestions)

Install _zsh-syntax-highlighting_:  
[https://github.com/zsh-users/zsh-syntax-highlighting](https://github.com/zsh-users/zsh-syntax-highlighting)